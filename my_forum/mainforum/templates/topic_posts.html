{% extends 'master.html'%}
{%load static%}

{%block title%}
{{topic.subject}}-{{block.super}}
{%endblock%}


{%block breadcrumb%}
<li class="breadcrumb-item active" aria-current="page"><a href="{% url 'home'%}">Boards</a></li>
<li class="breadcrumb-item active" aria-current="page"><a href="{% url 'board_topics' topics.board.pk %}">{{topics.board.name}}</a></li>
<li class="breadcrumb-item active" aria-current="page">{{topics.subject}}</li>
{%endblock%}

{%block content%}

<div class="mb-4">
    <a href="{% url 'reply_posts' topics.board.pk topics.pk %}" class="btn btn-primary btn-sm" role="button">Reply</a>
</div>


{% for post in topics.posts.all%}
<div class="card mb-3 {%if forloop.first%} border-dark {%endif%}">
    {%if forloop.first%}
    <div class="card-header text-white bg-dark py-2 px-3">{{topics.subject}}</div>
       <div class="card-body p-3">
        <div class="row">
            <div class="col-2">
                <img src="{%static 'images/masterAvatar.png'%}" alt="{{post.creator.username}}" class="w-100">
                <small> Posts: {{post.creator.posts.count}}</small>
            </div>
            <div class="col-10">
                <div class="row mb-3">
                    <div class="col-6">
                        <strong class="text-muted" >{{post.creator.username}}</strong>
                    </div>
                    <div class="col-6 text-right">
                        <small class="text-muted" >{{created_at}}</small>
                    </div>
                </div>
                {{post.message}}
                {% if post.creator == user %}
                <div class="mt-3">
                    <a href="#" class="btn btn-primary btn-sm" role="button">Edit</a>
                </div>
                {% endif%}

            </div>
        </div>
    </div>
    {% else %}
    <div class="card-body p-3">
        <div class="row">
            <div class="col-2">
                <img src="{%static 'images/avatar.svg'%}" alt="{{post.creator.username}}" class="w-100">
                <small> Posts: {{post.creator.posts.count}}</small>
            </div>
            <div class="col-10">
                <div class="row mb-3">
                    <div class="col-6">
                        <strong class="text-muted" >{{post.creator.username}}</strong>
                    </div>
                    <div class="col-6 text-right">
                        <small class="text-muted" >{{created_at}}</small>
                    </div>
                </div>
                {{post.message}}
                {% if post.creator == user %}
                <div class="mt-3">
                    <a href="#" class="btn btn-primary btn-sm" role="button">Edit</a>
                </div>
                {% endif%}

            </div>
        </div>
    </div>
    {% endif %}
</div>

{%endfor%}
{% endblock %}
